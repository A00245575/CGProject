<html lang="en">
<head>


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
    <style>
        body {
            background-color: #515151;
        }

        .bg-darker {
            background-color: #2a2a2b;
        }
    </style>

    <title></title>
</head>
<body>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/drilldown.js"></script>

<div class="container-fluid pl-5 pr-5">
    <div class="jumbotron text-light bg-darker">
        <h1>Twitter Sentiment Analysis</h1>
        <p>Created by James Kidd & Declan Hills</p>
    </div>
    <h4 class="text-center text-light">Select Topics</h4>
    <div class="row">
        <div class="col-xl-4 offset-1 mb-3">
            <label for="topic1">Topic 1:</label>
            <input type="text" class="form-control" id="topic1" placeholder="Enter topic 1" name="topic1" required>
        </div>
        <div class="col-xl-4 offset-2 mb-3">
            <label for="topic2">Topic 2:</label>
            <input type="text" class="form-control" id="topic2" placeholder="Enter topic 2" name="topic2" required>
        </div>
    </div>
    <div class="row">
        <div class="col-xl-12 mt-5 mb-5">
            <div id="container" style="min-width: 310px; height: 400px;"></div>
        </div>
    </div>
    {#    <div class="row">#}
    {#        <div class="col-xl-12 mt-5 mb-5">#}
    {#            <div id="container2" style="min-width: 310px; height: 800px;"></div>#}
    {#        </div>#}
    {#    </div>#}
</div>
<script type="text/javascript">
    const defaultData = "../static/TestFiles/sentiment.csv";
        let counter = 0;

        {#let v1 = $('container').highcharts();#}
        {#    v1.series[0].data.y = counter++;#}
        {#    v1.redraw();#}
        {#    counter++;#}
        {#    $('#container').highcharts().redraw();#}
        {#    console.log(counter);#}
        {#    counter++;#}
         window.setInterval(UpdatePostive, 1000);

    function redrawFunction() {
        $('#container').highcharts().redraw();
    }

    function UpdatePostive() {
        var chart = $('#container').highcharts();
        chart.series[0].setData([
            {
                name: "Positive",
                y: counter++,
                drilldown: "Positive"
            },
            {
                name: "Neutral",
                y: 10.57,
                drilldown: "Neutral"
            },
            {
                name: "Negative",
                y: 7.23,
                drilldown: "Negative"
            }]);
        console.log(chart.series[0].getData);
        redrawFunction();
    }

        function createChart() {

            // Create the chart
            let chart = new Highcharts.chart({
                chart: {
                    type: 'column',
                    renderTo: 'container'
                },
                title: {
                    text: 'Twitter Sentiment Analysis'
                },
                subtitle: {
                    text: 'Click the columns to view drill-downs.'
                },
                xAxis: {
                    type: 'category'
                },
                yAxis: {
                    title: {
                        text: 'Total percent sentiment share'
                    }

                },
                legend: {
                    enabled: false
                },
                plotOptions: {
                    series: {
                        borderWidth: 0,
                        dataLabels: {
                            enabled: true,
                            format: '{point.y:.1f}'
                        }
                    }
                },

                tooltip: {
                    headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                    pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'
                },

                series: [
                    {
                        name: "Sentiments",
                        colorByPoint: true,
                        data: [
                            {
                                name: "Positive",
                                y: counter,
                                drilldown: "Positive"
                            },
                            {
                                name: "Neutral",
                                y: 10.57,
                                drilldown: "Neutral"
                            },
                            {
                                name: "Negative",
                                y: 7.23,
                                drilldown: "Negative"
                            }
                        ]
                    }
                ],
                drilldown: {
                    series: [
                        {
                            name: "Positive",
                            id: "Positive",
                            data: [
                                [
                                    "v65.0",
                                    0.1
                                ],
                                [
                                    "v64.0",
                                    1.3
                                ],
                                [
                                    "v63.0",
                                    53.02
                                ],
                                [
                                    "v62.0",
                                    1.4
                                ],
                                [
                                    "v61.0",
                                    0.88
                                ],
                                [
                                    "v60.0",
                                    0.56
                                ],
                                [
                                    "v59.0",
                                    0.45
                                ],
                                [
                                    "v58.0",
                                    0.49
                                ],
                                [
                                    "v57.0",
                                    0.32
                                ],
                                [
                                    "v56.0",
                                    0.29
                                ],
                                [
                                    "v55.0",
                                    0.79
                                ],
                                [
                                    "v54.0",
                                    0.18
                                ],
                                [
                                    "v51.0",
                                    0.13
                                ],
                                [
                                    "v49.0",
                                    2.16
                                ],
                                [
                                    "v48.0",
                                    0.13
                                ],
                                [
                                    "v47.0",
                                    0.11
                                ],
                                [
                                    "v43.0",
                                    0.17
                                ],
                                [
                                    "v29.0",
                                    0.26
                                ]
                            ]
                        },
                        {
                            name: "Neutral",
                            id: "Neutral",
                            data: [
                                [
                                    "v58.0",
                                    1.02
                                ],
                                [
                                    "v57.0",
                                    7.36
                                ],
                                [
                                    "v56.0",
                                    0.35
                                ],
                                [
                                    "v55.0",
                                    0.11
                                ],
                                [
                                    "v54.0",
                                    0.1
                                ],
                                [
                                    "v52.0",
                                    0.95
                                ],
                                [
                                    "v51.0",
                                    0.15
                                ],
                                [
                                    "v50.0",
                                    0.1
                                ],
                                [
                                    "v48.0",
                                    0.31
                                ],
                                [
                                    "v47.0",
                                    0.12
                                ]
                            ]
                        },
                        {
                            name: "Negative",
                            id: "Negative",
                            data: [
                                [
                                    "v11.0",
                                    6.2
                                ],
                                [
                                    "v10.0",
                                    0.29
                                ],
                                [
                                    "v9.0",
                                    0.27
                                ],
                                [
                                    "v8.0",
                                    0.47
                                ]
                            ]
                        }
                    ]
                }
            });

        }

        // Create the chart
        createChart();

</script>
</body>

</html>
